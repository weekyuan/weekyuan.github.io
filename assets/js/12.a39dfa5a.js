(window.webpackJsonp=window.webpackJsonp||[]).push([[12],{366:function(e,a,t){"use strict";t.r(a);var s=t(0),r=Object(s.a)({},(function(){var e=this,a=e.$createElement,t=e._self._c||a;return t("ContentSlotsDistributor",{attrs:{"slot-key":e.$parent.slotKey}},[t("div",{staticClass:"custom-block tip"},[t("p",{staticClass:"custom-block-title"},[e._v("介绍")]),e._v(" "),t("p",[e._v("主要记录内核升级用到的命令。")])]),e._v(" "),t("hr"),e._v(" "),t("p",[e._v("升级主要分为小版本升级和大版本升级两种。")]),e._v(" "),t("h2",{attrs:{id:"小版本升级"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#小版本升级"}},[e._v("#")]),e._v(" 小版本升级")]),e._v(" "),t("h3",{attrs:{id:"_1-查看当前和可升级版本"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_1-查看当前和可升级版本"}},[e._v("#")]),e._v(" 1. 查看当前和可升级版本")]),e._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[e._v("yum list kernel\n")])])]),t("h3",{attrs:{id:"_2-升级操作"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_2-升级操作"}},[e._v("#")]),e._v(" 2.升级操作")]),e._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[e._v("yum update kernel -y\n")])])]),t("h3",{attrs:{id:"_3-重启并检查"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_3-重启并检查"}},[e._v("#")]),e._v(" 3.重启并检查")]),e._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[e._v("reboot\nuname -r\n")])])]),t("h2",{attrs:{id:"大版本升级"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#大版本升级"}},[e._v("#")]),e._v(" 大版本升级")]),e._v(" "),t("h3",{attrs:{id:"_1-载入公钥"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_1-载入公钥"}},[e._v("#")]),e._v(" 1. 载入公钥")]),e._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[e._v("rpm --import https://www.elrepo.org/RPM-GPG-KEY-elrepo.org\n")])])]),t("h3",{attrs:{id:"_2-升级安装elrepo"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_2-升级安装elrepo"}},[e._v("#")]),e._v(" 2. 升级安装ELRepo")]),e._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[e._v("yum install https://www.elrepo.org/elrepo-release-7.0-4.el7.elrepo.noarch.rpm\n")])])]),t("h3",{attrs:{id:"_3-载入elrepo-kernel元数据"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_3-载入elrepo-kernel元数据"}},[e._v("#")]),e._v(" 3. 载入elrepo-kernel元数据")]),e._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[e._v(" yum --disablerepo=\\* --enablerepo=elrepo-kernel repolist\n")])])]),t("h3",{attrs:{id:"_4-查看可用的rpm包"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_4-查看可用的rpm包"}},[e._v("#")]),e._v(" 4. 查看可用的rpm包")]),e._v(" "),t("p",[e._v("yum --disablerepo=* --enablerepo=elrepo-kernel list kernel*")]),e._v(" "),t("blockquote",[t("p",[e._v("lt  ：long term support，长期支持版本；\nml：mainline，主线版本；")])]),e._v(" "),t("h3",{attrs:{id:"_5-安装最新版本的kernel"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_5-安装最新版本的kernel"}},[e._v("#")]),e._v(" 5. 安装最新版本的kernel")]),e._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[e._v("yum --disablerepo=\\* --enablerepo=elrepo-kernel install  kernel-ml.x86_64  -y\n")])])]),t("h3",{attrs:{id:"_6-删除旧版本工具包"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_6-删除旧版本工具包"}},[e._v("#")]),e._v(" 6. 删除旧版本工具包")]),e._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[e._v("yum remove kernel-lt-tools kernel-lt-tools-libs\n")])])]),t("h3",{attrs:{id:"_7-安装新版本工具包"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_7-安装新版本工具包"}},[e._v("#")]),e._v(" 7. 安装新版本工具包")]),e._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[e._v("yum --disablerepo=\\* --enablerepo=elrepo-kernel install kernel-ml-tools.x86_64  -y\n")])])]),t("h3",{attrs:{id:"_8-查看内核插入顺序"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_8-查看内核插入顺序"}},[e._v("#")]),e._v(" 8. 查看内核插入顺序")]),e._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[e._v('awk -F \\\' \'$1=="menuentry " {print i++ " : " $2}\' /etc/grub2.cfg\n')])])]),t("blockquote",[t("p",[e._v("默认新内核是从头插入，默认启动顺序也是从0开始（当前顺序还未生效）")])]),e._v(" "),t("h3",{attrs:{id:"_9-查看当前实际启动顺序"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_9-查看当前实际启动顺序"}},[e._v("#")]),e._v(" 9. 查看当前实际启动顺序")]),e._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[e._v("grub2-editenv list\n")])])]),t("h3",{attrs:{id:"_10-设置默认启动"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_10-设置默认启动"}},[e._v("#")]),e._v(" 10. 设置默认启动")]),e._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[e._v("grub2-set-default 0\n")])])]),t("h3",{attrs:{id:"_11-重启并检查"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_11-重启并检查"}},[e._v("#")]),e._v(" 11. 重启并检查")]),e._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",[t("code",[e._v("reboot\nuname -r\n")])])])])}),[],!1,null,null,null);a.default=r.exports}}]);